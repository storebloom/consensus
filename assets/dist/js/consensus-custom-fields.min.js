var ConsensusCustomFields=function(o,c){"use strict";return{data:{},boot:function(e){this.data=e,o(document).ready(function(){this.init()}.bind(this))},init:function(){this.$container=o(".wp-admin"),this.listen()},listen:function(){var n=this;this.$container.on("click",".add-overlay-field",function(){var e=o(this).closest(".postbox").attr("id").replace("-consensus",""),s=o(this).closest(".postbox").find(".inside .consensus-overlay-field:last-of-type").attr("data-num");n.addOverlayField(s,e)}),this.$container.on("click",".add-wysiwyg-repeater-field",function(){var e=o(this).closest(".postbox").attr("id").replace("-consensus",""),s=o(this).closest(".postbox").find(".inside .consensus-wysiwyg-repeater-field:last-of-type").attr("data-num");n.addWysiwygField(s,e)}),this.$container.on("click",".add-wysiwyg-image-repeater-field",function(){var e=o(this).closest(".postbox").attr("id").replace("-consensus",""),s=o(this).closest(".postbox").find(".inside .consensus-wysiwyg-image-repeater-field:last-of-type").attr("data-num");n.addWysiwygImageField(s,e)}),this.$container.on("click",".add-usecase-field",function(){var e=o(this).closest(".postbox").attr("id").replace("-consensus",""),s=o(this).closest(".postbox").find(".inside .consensus-usecase-repeater-field:last-of-type").attr("data-num");n.addUsecaseTabField(s,e)}),this.$container.on("click",".add-usecase-content-field",function(){var e=o(this).attr("data-side"),s=o(this).closest(".postbox").attr("id").replace("-consensus",""),a=o(this).closest(".consensus-usecase-repeater-field").attr("data-num"),t=o(this).closest("."+e+"-repeater-section").find(".consensus-tab-content-overlay:last-of-type").attr("data-num");n.addUsecaseField(a,s,t,e)}),this.$container.on("click",".add-link-field",function(){var e=o(this).closest(".postbox").attr("id").replace("-consensus",""),s=o(this).closest(".postbox").find(".inside .consensus-link-field:last-of-type").attr("data-num");n.addLinkField(s,e)}),this.$container.on("click",".add-image-text-field",function(){var e=o(this).closest(".postbox").attr("id").replace("-consensus",""),s=o(this).closest(".postbox").find(".inside .consensus-image-text-field:last-of-type").attr("data-num");n.addImageTextField(s,e)}),this.$container.on("click",".remove-overlay-field",function(){o(this).parent(".consensus-overlay-field").remove()}),this.$container.on("click",".remove-wysiwyg-repeater-field",function(){o(this).parent(".consensus-wysiwyg-repeater-field").remove()}),this.$container.on("click",".remove-wysiwyg-image-repeater-field",function(){o(this).parent(".consensus-wysiwyg-image-repeater-field").remove()}),this.$container.on("click",".remove-link-field",function(){o(this).parent(".consensus-link-field").remove()}),this.$container.on("click",".remove-usecase-tab-field",function(){o(this).parent(".consensus-usecase-repeater-field").remove()}),this.$container.on("click",".remove-usecase-field",function(){o(this).parent(".consensus-tab-content-overlay").remove()}),this.$container.on("click",".remove-image-text-field",function(){o(this).parent(".consensus-image-text-field").remove()}),this.$container.on("click",".add-consensus-image",function(){var a=this;return window.send_to_editor=function(e){var s=o(e).attr("src");o(a).siblings("input").val(s),tb_remove()},tb_show("","media-upload.php?type=image&amp;TB_iframe=true"),!1})},addOverlayField:function(t,n){c.ajax.post("get_overlay_field",{count:t,section:n,nonce:this.data.nonce}).always(function(e){var s=parseInt(t)+1,a=n+"_overlay-repeater_"+s;o("#"+n+"-consensus .inside .consensus-overlay-field:last-of-type").after('<div data-num="'+s+'" class="consensus-overlay-field"><button type="button" class="remove-overlay-field">-</button><label class="consensus-admin-label">Overlay Repeater Title</label><input type="text" name="page-meta['+n+"][overlay-repeater]["+s+'][title]" value="" size="60"><label class="consensus-admin-label">Overlay Repeater URL (Leave empty if overlay)</label><input type="text" name="page-meta['+n+"][overlay-repeater]["+s+'][url]" value="" size="60"><label class="consensus-admin-label">Overlay Repeater Content</label></div>'),o("#"+n+"-consensus .inside .consensus-overlay-field:last-of-type").append(e),tinymce.execCommand("mceAddEditor",!1,a),quicktags({id:a})})},addUsecaseTabField:function(t,n){var i=this;c.ajax.post("get_usecase_tab_field",{count:t,side:"left",section:n,nonce:this.data.nonce}).always(function(e){var s=parseInt(t)+1,a=n+"_usecase-repeater_"+s+"_left_1_graph_content";o("#"+n+"-consensus .inside .consensus-usecase-repeater-field:last-of-type").after('<div data-num="'+s+'" class="consensus-usecase-repeater-field"><label class="consensus-admin-label">Tab Name</label><button type="button" class="remove-tab-field">-</button><input type="text" name="page-meta['+n+"][usecase-repeater]["+s+'][title]" value="" size="60"><hr><div data-num="1" class="left-repeater-section"><div class="side-title">Left Side</div><div data-num="'+s+'" data-side="left" class="consensus-tab-content-overlay"><button data-side="left" type="button" class="remove-usecase-field">-</button><label class="consensus-admin-label">First Graph Number</label><input type="number" name="page-meta['+n+"][usecase-repeater]["+s+'][left][1][graph-first]" value=""><label class="consensus-admin-label">First Graph Text</label><input type="text" name="page-meta['+n+"][usecase-repeater]["+s+'][left][1][graph-first-text]" value="" size="60"><label class="consensus-admin-label">Second Graph Number</label><input type="number" name="page-meta['+n+"][usecase-repeater]["+s+'][left][1][graph-second]" value=""><label class="consensus-admin-label">Second Graph Text</label><input type="text" name="page-meta['+n+"][usecase-repeater]["+s+'][left][1][graph-second-text]" value="" size="60"><label class="consensus-admin-label">Graph Content (To use for non graph content simply do not fill out any graph numbers above)</label>'+e+'</div><button data-side="left" type="button" class="add-usecase-content-field">+</button></div><div data-num="1" class="right-repeater-section"><div class="side-title">Right Side</div><div data-num="1" data-side="right" class="consensus-tab-content-overlay"><button data-side="right" type="button" class="remove-usecase-field">-</button><label class="consensus-admin-label">First Graph Number</label><input type="number" name="page-meta['+n+"][usecase-repeater]["+s+'][right][1][graph-first]" value=""><label class="consensus-admin-label">First Graph Text</label><input type="text" name="page-meta['+n+"][usecase-repeater]["+s+'][right][1][graph-first-text]" value="" size="60"><label class="consensus-admin-label">Second Graph Number</label><input type="number" name="page-meta['+n+"][usecase-repeater]["+s+'][right][1][graph-second]" value=""><label class="consensus-admin-label">Second Graph Text</label><input type="text" name="page-meta['+n+"][usecase-repeater]["+s+'][right][1][graph-second-text]" value="" size="60"><label class="consensus-admin-label">Graph Content (To use for non graph content simply do not fill out any graph numbers above)</label></div></div><button data-side="right" type="button" class="add-usecase-content-field">+</button></div>'),tinymce.execCommand("mceAddEditor",!1,a),quicktags({id:a}),c.ajax.post("get_usecase_tab_field",{count:t,side:"right",section:n,nonce:i.data.nonce}).always(function(e){var s=parseInt(t)+1,a=n+"_usecase-repeater_"+s+"_right_1_graph_content";o("#"+n+"-consensus .inside .consensus-usecase-repeater-field:last-of-type .right-repeater-section").append(e),tinymce.execCommand("mceAddEditor",!1,a),quicktags({id:a})})})},addUsecaseField:function(t,n,i,l){c.ajax.post("get_usecase_field",{count:t,side:l,section:n,side_count:i,nonce:this.data.nonce}).always(function(e){var s=parseInt(i)+1,a=n+"_usecase-repeater_"+t+"_"+l+"_"+s+"_graph_content";o("#"+n+'-consensus .inside .consensus-usecase-repeater-field[data-num="'+t+'"] .'+l+"-repeater-section .consensus-tab-content-overlay:last-of-type").after('<div data-num="'+s+'" data-side="'+l+'" class="consensus-tab-content-overlay"><button data-side="'+l+'" type="button" class="remove-usecase-field">-</button><label class="consensus-admin-label">First Graph Number</label><input type="number" name="page-meta['+n+"][usecase-repeater]["+t+"]["+l+"]["+s+'][graph-first]" value=""><label class="consensus-admin-label">First Graph Text</label><input type="text" name="page-meta['+n+"][usecase-repeater]["+t+"]["+l+"]["+s+'][graph-first-text]" value="" size="60"><label class="consensus-admin-label">Second Graph Number</label><input type="number" name="page-meta['+n+"][usecase-repeater]["+t+"]["+l+"]["+s+'][graph-second]" value=""><label class="consensus-admin-label">Second Graph Text</label><input type="text" name="page-meta['+n+"][usecase-repeater]["+t+"]["+l+"]["+s+'][graph-second-text]" value="" size="60"><label class="consensus-admin-label">Graph Content (To use for non graph content simply do not fill out any graph numbers above)</label>'+e+"</div>"),tinymce.execCommand("mceAddEditor",!1,a),quicktags({id:a})})},addWysiwygField:function(t,n){c.ajax.post("get_wysiwyg_field",{count:t,section:n,nonce:this.data.nonce}).always(function(e){var s=parseInt(t)+1,a=n+"_wysiwyg-repeater_"+s;o("#"+n+"-consensus .inside .consensus-wysiwyg-repeater-field:last-of-type").after('<div data-num="'+s+'" class="consensus-wysiwyg-repeater-field"><button type="button" class="remove-wysiwyg-repeater-field">-</button><label class="consensus-admin-label">Locations Content</label></div>'),o("#"+n+"-consensus .inside .consensus-wysiwyg-repeater-field:last-of-type").append(e),tinymce.execCommand("mceAddEditor",!1,a),quicktags({id:a})})},addWysiwygImageField:function(t,n){c.ajax.post("get_wysiwyg_image_field",{count:t,section:n,nonce:this.data.nonce}).always(function(e){var s=parseInt(t)+1,a=n+"_history_"+s+"_content";o("#"+n+"-consensus .inside .consensus-wysiwyg-image-repeater-field:last-of-type").after('<div data-num="'+s+'" class="consensus-wysiwyg-image-repeater-field"><button type="button" class="remove-wysiwyg-image-repeater-field">-</button><label class="consensus-admin-label">New Content</label></div>'),o("#"+n+"-consensus .inside .consensus-wysiwyg-image-repeater-field:last-of-type").append(e),o("#"+n+"-consensus .inside .consensus-wysiwyg-image-repeater-field:last-of-type").append('<div class="field-label-wrap"><label class="consensus-admin-label">New Image</label><input type="text" name="page-meta['+n+"][history]["+s+'][image]" value="" size="60"><button class="add-consensus-image">Add Image</button></div>'),tinymce.execCommand("mceAddEditor",!1,a),quicktags({id:a})})},addLinkField:function(e,s){var a=parseInt(e)+1;o("#"+s+"-consensus .inside .consensus-link-field:last-of-type").after('<div data-num="'+a+'" class="consensus-link-field"><label class="consensus-admin-label">Link repeater Title</label><input type="text" name="page-meta['+s+"][link-repeater]["+a+'][title]" value="" size="60"><label class="consensus-admin-label">Link repeater URL</label><input type="text" name="page-meta['+s+"][link-repeater]["+a+'][url]" value="" size="60"></div>'),o("#"+s+"-consensus .inside .consensus-link-field:last-of-type").append(results)},addImageTextField:function(e,s){var a=parseInt(e)+1;o("#"+s+"-consensus .inside .consensus-image-text-field:last-of-type").after('<div data-num="'+a+'" class="consensus-image-text-field"><div class="field-label-wrap"><label class="consensus-admin-label">Partners Title</label><input type="text" name="page-meta['+s+"][partners]["+a+'][title]" value="" size="60"><button type="button" class="remove-image-text-repeater-field">-</button></div><div class="field-label-wrap"><label class="consensus-admin-label">Partners Image</label><input type="text" name="page-meta['+s+"][partners]["+a+'][image]" value="" size="60"><button class="add-consensus-image">Add Image</button></div></div>')}}}(window.jQuery,window.wp);